(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{109:function(e,t,n){"use strict";n.d(t,"a",(function(){return u})),n.d(t,"b",(function(){return g}));var r=n(0),a=n.n(r);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var l=a.a.createContext({}),b=function(e){var t=a.a.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):s(s({},t),e)),n},u=function(e){var t=b(e.components);return a.a.createElement(l.Provider,{value:t},e.children)},p={inlineCode:"code",wrapper:function(e){var t=e.children;return a.a.createElement(a.a.Fragment,{},t)}},d=a.a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,o=e.originalType,i=e.parentName,l=c(e,["components","mdxType","originalType","parentName"]),u=b(n),d=r,g=u["".concat(i,".").concat(d)]||u[d]||p[d]||o;return n?a.a.createElement(g,s(s({ref:t},l),{},{components:n})):a.a.createElement(g,s({ref:t},l))}));function g(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var o=n.length,i=new Array(o);i[0]=d;var s={};for(var c in t)hasOwnProperty.call(t,c)&&(s[c]=t[c]);s.originalType=e,s.mdxType="string"==typeof e?e:r,i[1]=s;for(var l=2;l<o;l++)i[l]=n[l];return a.a.createElement.apply(null,i)}return a.a.createElement.apply(null,n)}d.displayName="MDXCreateElement"},80:function(e,t,n){"use strict";n.r(t),n.d(t,"frontMatter",(function(){return i})),n.d(t,"metadata",(function(){return s})),n.d(t,"toc",(function(){return c})),n.d(t,"default",(function(){return b}));var r=n(3),a=n(7),o=(n(0),n(109)),i={id:"agents",title:"Agents"},s={unversionedId:"agents",id:"agents",isDocsHomePage:!1,title:"Agents",description:"Agent is a part of Kraken system. The place of agents in Kraken is",source:"@site/docs/agents.md",slug:"/agents",permalink:"/docs/agents",editUrl:"https://github.com/kraken-ci/website/edit/master/docs/agents.md",version:"current",sidebar:"someSidebar",previous:{title:"Server API v1",permalink:"/docs/server-api"},next:{title:"Contributing to Kraken",permalink:"/docs/contrib-kraken"}},c=[{value:"Browsing Agents",id:"browsing-agents",children:[]},{value:"Agents Groups",id:"agents-groups",children:[]},{value:"Discovered Agents",id:"discovered-agents",children:[]},{value:"Setting up a New Agent",id:"setting-up-a-new-agent",children:[]}],l={toc:c};function b(e){var t=e.components,n=Object(a.a)(e,["components"]);return Object(o.b)("wrapper",Object(r.a)({},l,n,{components:t,mdxType:"MDXLayout"}),Object(o.b)("p",null,"Agent is a part of Kraken system. The place of agents in Kraken is\nvisualized in ",Object(o.b)("a",Object(r.a)({parentName:"p"},{href:"/docs/architecture"}),"Architecture chapter"),"."),Object(o.b)("p",null,"Agent is a piece of software that is installed on separate system.\nIt connects to Kraken server, gets jobs to execution and executes\nthem. A job can be executed in several ways. It depends on selected\nexecutor indicated in job definition. A job may be executed:"),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},"locally on current host system,"),Object(o.b)("li",{parentName:"ul"},"inside Docker container,"),Object(o.b)("li",{parentName:"ul"},"inside LXD container.")),Object(o.b)("h2",{id:"browsing-agents"},"Browsing Agents"),Object(o.b)("p",null,"In the top bar of UI, on right side, there is an ",Object(o.b)("inlineCode",{parentName:"p"},"Agents")," menu.\nIt can be used to find and manage agents."),Object(o.b)("p",null,"The first position, ",Object(o.b)("inlineCode",{parentName:"p"},"Agents")," allows for browsing active agents that can\nexecute jobs. The table of agents shows their address, current system\nwhere they are running, if they are running on bare-metal host or in\nDocker container, what capabilities host system has, currently running\njob, etc."),Object(o.b)("p",null,"Clicking the agent address leads to agent page which shows Agent\ndetails. Here, it is also possible to assign an agent to ",Object(o.b)("inlineCode",{parentName:"p"},"Agents\nGroups"),". These groups are used in job definitions in workflow schema\nto indicate from which group an agent should be selected to execute\nindicated job."),Object(o.b)("h2",{id:"agents-groups"},"Agents Groups"),Object(o.b)("p",null,"The next menu position, ",Object(o.b)("inlineCode",{parentName:"p"},"Groups"),", allows for gathering agents\ninto groups. Grouping can be arbitrary and manually managed by\nadministrator. It can be by hardware features, host system\ncapabilities, etc."),Object(o.b)("h2",{id:"discovered-agents"},"Discovered Agents"),Object(o.b)("p",null,"The last menu position, ",Object(o.b)("inlineCode",{parentName:"p"},"Discovered"),", shows list of agents that tried\nto connect to the Kraken server but are not authorized to do so. Here\nwe can find newly setup agent and athorize it. From that moment it can\nexecute jobs but first it is good to assign this new agent to proper\ngroups."),Object(o.b)("h2",{id:"setting-up-a-new-agent"},"Setting up a New Agent"),Object(o.b)("p",null,"Make sure that on Kraken -> Settings page there is  URL to Kraken\nServer set (copy and paste URL from web browser to this field)."),Object(o.b)("p",null,"So now a new Agent can be installed. It involves downloading an agent\ninstallerr and running it. That's all."),Object(o.b)("p",null,"Agent Install steps:"),Object(o.b)("ol",null,Object(o.b)("li",{parentName:"ol"},"Download Kraken agent installer:")),Object(o.b)("pre",null,Object(o.b)("code",Object(r.a)({parentName:"pre"},{className:"language-console"}),"$ wget http://<kraken-server-address>/install/kraken-agent-install.sh\n")),Object(o.b)("ol",{start:2},Object(o.b)("li",{parentName:"ol"},"Execute installer:")),Object(o.b)("pre",null,Object(o.b)("code",Object(r.a)({parentName:"pre"},{className:"language-console"}),"$ chmod a+x kraken-agent-install.sh\n$ ./kraken-agent-install.sh\n")),Object(o.b)("p",null,"This will download the latest agent from Kraken server and install it\nas a SystemD service on the host. Agent's files are installed into\n/opt/kraken directory."),Object(o.b)("p",null,"Now the new agent can be authorized in Kraken server. On Discovered\nagents page there should be visible an IP address of the host with the\nnew agent. Select checkbox and click ",Object(o.b)("inlineCode",{parentName:"p"},"Authorize")," button. And then add\nthe agent to proper agent's group. Now the new agent will be getting\njobs for execution."))}b.isMDXComponent=!0}}]);