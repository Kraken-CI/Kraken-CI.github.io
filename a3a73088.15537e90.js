(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{126:function(e,n,t){"use strict";t.r(n),n.default=t.p+"assets/images/kraken-projects-6eba2e4b9ec14a082451cbae893dadf1.png"},127:function(e,n,t){"use strict";t.r(n),n.default=t.p+"assets/images/kraken-branches-ff1cfc375576c71881292e0ae8a6cc7d.png"},128:function(e,n,t){"use strict";t.r(n),n.default=t.p+"assets/images/kraken-stages-2c3fd7a9951665b5a6d067915ab2360a.png"},129:function(e,n,t){"use strict";t.r(n),n.default=t.p+"assets/images/kraken-jobs-steps-4af264c74c8685cfb91864dd700130b6.png"},130:function(e,n,t){"use strict";t.r(n),n.default=t.p+"assets/images/kraken-flows-4e0d747d54136cc22026a7e4ebe6ea23.png"},74:function(e,n,t){"use strict";t.r(n),t.d(n,"frontMatter",(function(){return o})),t.d(n,"metadata",(function(){return b})),t.d(n,"rightToc",(function(){return l})),t.d(n,"default",(function(){return s}));var a=t(2),i=t(6),r=(t(0),t(87)),o={id:"entities",title:"Entities & Terminology"},b={unversionedId:"entities",id:"entities",isDocsHomePage:!1,title:"Entities & Terminology",description:"Project",source:"@site/docs/entities.md",slug:"/entities",permalink:"/docs/entities",editUrl:"https://github.com/kraken-ci/website/edit/master/docs/entities.md",version:"current",sidebar:"someSidebar",previous:{title:"Installation",permalink:"/docs/installation"},next:{title:"Architecture",permalink:"/docs/architecture"}},l=[{value:"Project",id:"project",children:[]},{value:"Branch",id:"branch",children:[]},{value:"Stage",id:"stage",children:[]},{value:"Jobs",id:"jobs",children:[]},{value:"Flows &amp; Runs",id:"flows--runs",children:[]},{value:"Example of a Workflow Schema",id:"example-of-a-workflow-schema",children:[]}],c={rightToc:l};function s(e){var n=e.components,o=Object(i.a)(e,["components"]);return Object(r.b)("wrapper",Object(a.a)({},c,o,{components:n,mdxType:"MDXLayout"}),Object(r.b)("h3",{id:"project"},"Project"),Object(r.b)("p",null,Object(r.b)("inlineCode",{parentName:"p"},"Project")," is the highest level entity, which separates things from other ",Object(r.b)("inlineCode",{parentName:"p"},"projects"),"."),Object(r.b)("p",null,Object(r.b)("img",{alt:"Projects",src:t(126).default})),Object(r.b)("h3",{id:"branch"},"Branch"),Object(r.b)("p",null,"A project can contain multiple ",Object(r.b)("inlineCode",{parentName:"p"},"branches"),". Kraken ",Object(r.b)("inlineCode",{parentName:"p"},"Branch")," can represent a real source code\nrepository branch of a ",Object(r.b)("inlineCode",{parentName:"p"},"project"),", but it does not have to. ",Object(r.b)("inlineCode",{parentName:"p"},"Branches")," are usually used to model\nmultiple parallel, often independent, activity streams of a ",Object(r.b)("inlineCode",{parentName:"p"},"project"),". For example a customer-focused maintenance release\nor a future-oriented development work. ",Object(r.b)("inlineCode",{parentName:"p"},"Branches")," may have different views of the source code repository,\nuse different sets of tools, have different scopes of tests, etc."),Object(r.b)("p",null,Object(r.b)("img",{alt:"Branches",src:t(127).default})),Object(r.b)("h3",{id:"stage"},"Stage"),Object(r.b)("p",null,"Each ",Object(r.b)("inlineCode",{parentName:"p"},"branch")," can contain multiple ",Object(r.b)("inlineCode",{parentName:"p"},"stages"),". A ",Object(r.b)("inlineCode",{parentName:"p"},"stage")," is used to define the detailed activities that will happen when a ",Object(r.b)("inlineCode",{parentName:"p"},"stage")," is executed."),Object(r.b)("p",null,Object(r.b)("inlineCode",{parentName:"p"},"Stages")," can be linked together to make one ",Object(r.b)("inlineCode",{parentName:"p"},"stage")," run after another ",Object(r.b)("inlineCode",{parentName:"p"},"stage")," is completed.\nAll ",Object(r.b)("inlineCode",{parentName:"p"},"stages")," that are not dependent (linked) and are ready to run, can be executed in parallel."),Object(r.b)("p",null,Object(r.b)("img",{alt:"Stages",src:t(128).default})),Object(r.b)("p",null,"What is happening in a ",Object(r.b)("inlineCode",{parentName:"p"},"stage")," is defined by ",Object(r.b)("inlineCode",{parentName:"p"},"stage's")," ",Object(r.b)("inlineCode",{parentName:"p"},"workflow schema")," or just ",Object(r.b)("inlineCode",{parentName:"p"},"schema"),".\nIn ",Object(r.b)("inlineCode",{parentName:"p"},"schema")," there can be defines:"),Object(r.b)("ul",null,Object(r.b)("li",{parentName:"ul"},"one or more ",Object(r.b)("inlineCode",{parentName:"li"},"stage")," parents"),Object(r.b)("li",{parentName:"ul"},Object(r.b)("inlineCode",{parentName:"li"},"triggers")),Object(r.b)("li",{parentName:"ul"},Object(r.b)("inlineCode",{parentName:"li"},"parameters")),Object(r.b)("li",{parentName:"ul"},Object(r.b)("inlineCode",{parentName:"li"},"configs")),Object(r.b)("li",{parentName:"ul"},Object(r.b)("inlineCode",{parentName:"li"},"jobs")),Object(r.b)("li",{parentName:"ul"},Object(r.b)("inlineCode",{parentName:"li"},"notifications")),Object(r.b)("li",{parentName:"ul"},Object(r.b)("inlineCode",{parentName:"li"},"timeout"))),Object(r.b)("p",null,Object(r.b)("inlineCode",{parentName:"p"},"Stage")," linking is defined by parents property in a ",Object(r.b)("inlineCode",{parentName:"p"},"stage"),". ",Object(r.b)("inlineCode",{parentName:"p"},"Parameters")," can be used to differentiate and parametrize ",Object(r.b)("inlineCode",{parentName:"p"},"jobs"),";\ntheir values can be provided by user while starting a ",Object(r.b)("inlineCode",{parentName:"p"},"stage")," manually otherwise default values are used.\n",Object(r.b)("inlineCode",{parentName:"p"},"Configs")," allow defining set of key-value pairs that statically define set of tests variants for execution.\n",Object(r.b)("inlineCode",{parentName:"p"},"Notifications")," can be used to inform users about ",Object(r.b)("inlineCode",{parentName:"p"},"stage")," result. There are several media available like email or Slack.\n",Object(r.b)("inlineCode",{parentName:"p"},"Timeout")," limits the time of whole ",Object(r.b)("inlineCode",{parentName:"p"},"stage")," executions. These assure us that the ",Object(r.b)("inlineCode",{parentName:"p"},"stage")," will be terminated if something really\nbad is happening in ",Object(r.b)("inlineCode",{parentName:"p"},"jobs")," execution (e.g. they are hanging the machines)."),Object(r.b)("p",null,"More details about these ",Object(r.b)("inlineCode",{parentName:"p"},"schema")," properties are available in chapter ",Object(r.b)("a",Object(a.a)({parentName:"p"},{href:"schema"}),"Schema"),"."),Object(r.b)("h3",{id:"jobs"},"Jobs"),Object(r.b)("p",null,Object(r.b)("inlineCode",{parentName:"p"},"jobs")," describe what should be done in a ",Object(r.b)("inlineCode",{parentName:"p"},"stage"),". A ",Object(r.b)("inlineCode",{parentName:"p"},"stage")," can define multiple ",Object(r.b)("inlineCode",{parentName:"p"},"jobs")," and they all are run in parallel."),Object(r.b)("h4",{id:"job-steps"},"Job Steps"),Object(r.b)("p",null,"Each ",Object(r.b)("inlineCode",{parentName:"p"},"job")," contains one or more ",Object(r.b)("inlineCode",{parentName:"p"},"steps")," that describe operations to be run sequentially. A single ",Object(r.b)("inlineCode",{parentName:"p"},"step")," can be for example:"),Object(r.b)("ul",null,Object(r.b)("li",{parentName:"ul"},"execution of a shell command"),Object(r.b)("li",{parentName:"ul"},"checking out sources from a repository"),Object(r.b)("li",{parentName:"ul"},"running tests by a test tool"),Object(r.b)("li",{parentName:"ul"},"running static checks by a linter"),Object(r.b)("li",{parentName:"ul"},"and many more")),Object(r.b)("p",null,Object(r.b)("img",{alt:"Jobs-Steps",src:t(129).default})),Object(r.b)("h4",{id:"job-environments"},"Job Environments"),Object(r.b)("p",null,"A ",Object(r.b)("inlineCode",{parentName:"p"},"Job")," contains definition of multiple ",Object(r.b)("inlineCode",{parentName:"p"},"environments"),". An ",Object(r.b)("inlineCode",{parentName:"p"},"environment")," specifies the following conditions for the execution of a ",Object(r.b)("inlineCode",{parentName:"p"},"job"),":"),Object(r.b)("ul",null,Object(r.b)("li",{parentName:"ul"},Object(r.b)("em",{parentName:"li"},"agents group")," - pointing to machines with agents which will be used to run the steps"),Object(r.b)("li",{parentName:"ul"},Object(r.b)("em",{parentName:"li"},"operating system")," - OS that will be used on the machines"),Object(r.b)("li",{parentName:"ul"},Object(r.b)("em",{parentName:"li"},"configuration")," - one of ",Object(r.b)("inlineCode",{parentName:"li"},"configurations")," defined in the ",Object(r.b)("inlineCode",{parentName:"li"},"stage"))),Object(r.b)("p",null,"With the help of ",Object(r.b)("inlineCode",{parentName:"p"},"environments"),", the same ",Object(r.b)("inlineCode",{parentName:"p"},"job")," can be run on various combinations of target machines, operating systems and configuration parameters.\nSo environments allow running the same job:"),Object(r.b)("ul",null,Object(r.b)("li",{parentName:"ul"},"on several different operating system;"),Object(r.b)("li",{parentName:"ul"},"on several different hardware, e.g.: one with AMD CPU, another one with Intel CPU;"),Object(r.b)("li",{parentName:"ul"},"with different tests configurations, e.g.: running the same benchmark but in several different resolutions.")),Object(r.b)("h3",{id:"flows--runs"},"Flows & Runs"),Object(r.b)("p",null,"When Kraken triggers execution of stages, it starts a ",Object(r.b)("inlineCode",{parentName:"p"},"flow"),". A ",Object(r.b)("inlineCode",{parentName:"p"},"flow")," begins with the first ",Object(r.b)("inlineCode",{parentName:"p"},"stage")," (or group of ",Object(r.b)("inlineCode",{parentName:"p"},"stages"),") in the ",Object(r.b)("inlineCode",{parentName:"p"},"branch"),".\nA ",Object(r.b)("inlineCode",{parentName:"p"},"stage")," that has been triggered and is executing, is called a ",Object(r.b)("inlineCode",{parentName:"p"},"run"),"."),Object(r.b)("p",null,"Subsequent ",Object(r.b)("inlineCode",{parentName:"p"},"runs")," are triggered by one of prior ",Object(r.b)("inlineCode",{parentName:"p"},"runs"),". ",Object(r.b)("inlineCode",{parentName:"p"},"Runs")," can also be triggered manually."),Object(r.b)("p",null,"There can be two kinds of flows that are predefined by Kraken (see ",Object(r.b)("a",Object(a.a)({parentName:"p"},{href:"/docs/philosophy"}),"Kraken's Philosophy"),"):"),Object(r.b)("ul",null,Object(r.b)("li",{parentName:"ul"},Object(r.b)("inlineCode",{parentName:"li"},"DEV flow")," - it represents ",Object(r.b)("em",{parentName:"li"},"pre-commit")," activities, for example it can be triggered by developer on demand"),Object(r.b)("li",{parentName:"ul"},Object(r.b)("inlineCode",{parentName:"li"},"CI flow")," - it represents ",Object(r.b)("em",{parentName:"li"},"post-commit")," activities, for example it can be triggered by commits to the production source code (master)")),Object(r.b)("p",null,"A ",Object(r.b)("inlineCode",{parentName:"p"},"run")," can dynamically determine in the context of which ",Object(r.b)("inlineCode",{parentName:"p"},"flow")," it is running - ",Object(r.b)("inlineCode",{parentName:"p"},"CI")," or ",Object(r.b)("inlineCode",{parentName:"p"},"DEV"),"."),Object(r.b)("p",null,"A ",Object(r.b)("inlineCode",{parentName:"p"},"job")," that is being executed as part of a ",Object(r.b)("inlineCode",{parentName:"p"},"run")," is called ",Object(r.b)("inlineCode",{parentName:"p"},"job in\nrun"),". It has an individual execution status. Upon completion, it can\nalso have multiple test results or issues."),Object(r.b)("p",null,"Similarily, a ",Object(r.b)("inlineCode",{parentName:"p"},"step")," that is being executed as part of a ",Object(r.b)("inlineCode",{parentName:"p"},"job in run")," is called ",Object(r.b)("inlineCode",{parentName:"p"},"step in run"),"."),Object(r.b)("p",null,"A ",Object(r.b)("inlineCode",{parentName:"p"},"job in run")," is executed (multiplied) for each of the ",Object(r.b)("inlineCode",{parentName:"p"},"environments")," defined in a ",Object(r.b)("inlineCode",{parentName:"p"},"stage"),"."),Object(r.b)("p",null,Object(r.b)("img",{alt:"Jobs-Steps",src:t(130).default})),Object(r.b)("h3",{id:"example-of-a-workflow-schema"},"Example of a Workflow Schema"),Object(r.b)("p",null,Object(r.b)("inlineCode",{parentName:"p"},"Stage")," is defined in Python-like syntax."),Object(r.b)("pre",null,Object(r.b)("code",Object(a.a)({parentName:"pre"},{className:"language-python"}),'def stage(ctx):\n    return {\n        "parent": "Unit Tests",\n        "triggers": {\n            "parent": True,\n            "cron": "1 * * * *",\n            "interval": "10m",\n            "repository": True,\n            "webhook": True\n        },\n        "parameters": [],\n        "configs": [{\n            "name": "c1",\n            "p1": "1",\n            "p2": "3"\n        }, {\n            "name": "c2",\n            "n3": "33",\n            "t2": "asdf"\n        }],\n        "jobs": [{\n            "name": "make dist",\n            "steps": [{\n                "tool": "git",\n                "checkout": "https://github.com/frankhjung/python-helloworld.git",\n                "branch": "master"\n            }, {\n                "tool": "pytest",\n                "params": "tests/testhelloworld.py",\n                "cwd": "python-helloworld"\n            }],\n            "environments": [{\n                "system": "ubuntu-18.04",\n                "agents_group": "all",\n                "config": "c1"\n            }]\n        }],\n        "notification": {\n            "changes": {\n                "slack": {"channel": "kk-results"},\n                "email": "godfryd@gmail.com"\n            }\n        }\n    }\n')))}s.isMDXComponent=!0}}]);