"use strict";(self.webpackChunkkraken_ci_website=self.webpackChunkkraken_ci_website||[]).push([[1118],{9445:function(e,n,t){t.r(n),t.d(n,{assets:function(){return k},contentTitle:function(){return m},default:function(){return u},frontMatter:function(){return s},metadata:function(){return p},toc:function(){return c}});var a=t(3117),l=t(102),o=(t(7294),t(4137)),i=t(8742),r=(t(5944),["components"]),s={slug:"mlops-with-mlflow-on-kraken-ci",title:"MLOps with MLflow on Kraken CI",authors:"mike",tags:["kraken","devops","mlops","mlflow"]},m=void 0,p={permalink:"/blog/mlops-with-mlflow-on-kraken-ci",editUrl:"https://github.com/kraken-ci/website/edit/master/blog/blog/2022-04-28-mlops-with-mlflow-on-kraken-ci.mdx",source:"@site/blog/2022-04-28-mlops-with-mlflow-on-kraken-ci.mdx",title:"MLOps with MLflow on Kraken CI",description:"Kraken CI, beside building, testing and deploying, is also a pretty",date:"2022-04-28T00:00:00.000Z",formattedDate:"April 28, 2022",tags:[{label:"kraken",permalink:"/blog/tags/kraken"},{label:"devops",permalink:"/blog/tags/devops"},{label:"mlops",permalink:"/blog/tags/mlops"},{label:"mlflow",permalink:"/blog/tags/mlflow"}],readingTime:1.77,truncated:!0,authors:[{name:"Michal Nowikowski",title:"Kraken Founder. I\u2019m software engineer focused on full-stack programming and improving software processes.",url:"https://www.linkedin.com/in/godfryd",imageURL:"https://avatars1.githubusercontent.com/u/176567?s=460&u=4ade22771af9569be24b20278d24ef60da6eb0bb&v=4",key:"mike"}],frontMatter:{slug:"mlops-with-mlflow-on-kraken-ci",title:"MLOps with MLflow on Kraken CI",authors:"mike",tags:["kraken","devops","mlops","mlflow"]},nextItem:{title:"Dark Mode in 0.945 Release",permalink:"/blog/dark-mode-in-0-945"}},k={authorsImageUrls:[void 0]},c=[{value:"MLOps and MLflow",id:"mlops-and-mlflow",level:3},{value:"MLflow in Kraken CI",id:"mlflow-in-kraken-ci",level:3},{value:"Workflow Definition",id:"workflow-definition",level:3},{value:"Exeution and Monitoring",id:"exeution-and-monitoring",level:3}],d={toc:c};function u(e){var n=e.components,t=(0,l.Z)(e,r);return(0,o.kt)("wrapper",(0,a.Z)({},d,t,{components:n,mdxType:"MDXLayout"}),(0,o.kt)("p",null,"Kraken CI, beside building, testing and deploying, is also a pretty\nnice tool to build a ",(0,o.kt)("a",{parentName:"p",href:"https://en.wikipedia.org/wiki/MLOps"},"MLOps"),"\npipeline. In this article it will be show how to leverage Kraken CI to\nbuild a CI worklow for machine learning using\n",(0,o.kt)("a",{parentName:"p",href:"https://mlflow.org/"},"MLflow"),"."),(0,o.kt)("h3",{id:"mlops-and-mlflow"},"MLOps and MLflow"),(0,o.kt)("p",null,"MLOps is a set of practices that aims to build and maintain machine\nlearning models in production reliably and efficiently. One of\nprominent tool in this area is ",(0,o.kt)("a",{parentName:"p",href:"https://mlflow.org/"},"MLflow"),"."),(0,o.kt)("p",null,"MLflow is an open source platform for managing the end-to-end machine\nlearning lifecycle. It tackles four primary functions:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"Tracking experiments to record and compare parameters and results\n(MLflow Tracking)."),(0,o.kt)("li",{parentName:"ul"},"Packaging ML code in a reusable, reproducible form in order to share\nwith other data scientists or transfer to production (MLflow\nProjects)."),(0,o.kt)("li",{parentName:"ul"},"Managing and deploying models from a variety of ML libraries to a\nvariety of model serving and inference platforms (MLflow Models)."),(0,o.kt)("li",{parentName:"ul"},"Providing a central model store to collaboratively manage the full\nlifecycle of an MLflow Model, including model versioning, stage\ntransitions, and annotations (MLflow Model Registry).")),(0,o.kt)("h3",{id:"mlflow-in-kraken-ci"},"MLflow in Kraken CI"),(0,o.kt)("h3",{id:"workflow-definition"},"Workflow Definition"),(0,o.kt)("p",null,"When testing is being carried out by a Kraken agent, custom measured\nmetrics can be returned besides test results. Now it is possible to\njust generate such measurements, store them in a JSON file and then\nload them to the Kraken server. Then they will be visible on a job\nresults page and it is possible to display a chart based on these\nvalues."),(0,o.kt)("p",null,"The reported file should look like this (e.g. metrics.json):"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-json"},'{\n    "metric-1": 432,\n    "metric-2": 2.12,\n}\n')),(0,o.kt)("p",null,"The step that consumes these values should look like this:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-json"},'{\n    "tool": "values_collect",\n    "files": [{\n        "name": "metrics.json",\n        "namespace": "metrics"\n    }, {\n        "name": "params.json",\n        "namespace": "params"\n    }],\n    "cwd": "example"\n}\n')),(0,o.kt)("p",null,"The whole example of workflow with collected results is present in\nKraken lab: ",(0,o.kt)("a",{parentName:"p",href:"https://lab.kraken.ci/branches/32/ci"},"https://lab.kraken.ci/branches/32/ci"),". Check the steps\ndefinitions in ",(0,o.kt)("a",{parentName:"p",href:"https://lab.kraken.ci/branches/32"},"branch management\npage")," and then check the charts on\n",(0,o.kt)("a",{parentName:"p",href:"https://lab.kraken.ci/test_case_results/595950"},"tests results page"),",\nin the charts tab."),(0,o.kt)("p",null,"available under:\n",(0,o.kt)("a",{parentName:"p",href:"https://hub.docker.com/r/krakenci/mlflow"},"krakenci/mlflow"),"."),(0,o.kt)("h3",{id:"exeution-and-monitoring"},"Exeution and Monitoring"),(0,o.kt)("p",null,"The end results looks like that:"),(0,o.kt)(i.Z,{img:"screen-values-chart.png",mdxType:"Screen"}))}u.isMDXComponent=!0},8742:function(e,n,t){var a=t(7294);n.Z=function(e){var n=e.img;return a.createElement("a",{href:"/img/"+n,target:"blank"},a.createElement("img",{src:"/img/"+n,style:{boxShadow:"0 10px 10px 5px #777",marginBottom:"30px"}}))}}}]);