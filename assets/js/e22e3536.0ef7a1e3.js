"use strict";(self.webpackChunkkraken_ci_website=self.webpackChunkkraken_ci_website||[]).push([[346],{1751(e){e.exports=JSON.parse('{"permalink":"/blog/job-designer-and-more-0-962","editUrl":"https://github.com/kraken-ci/website/edit/master/blog/blog/2022-05-09-job-designer-and-more-0-962.mdx","source":"@site/blog/2022-05-09-job-designer-and-more-0-962.mdx","title":"Job Designer and More - 0.962 Release","description":"The job designer","date":"2022-05-09T00:00:00.000Z","tags":[{"inline":true,"label":"kraken","permalink":"/blog/tags/kraken"},{"inline":true,"label":"release","permalink":"/blog/tags/release"},{"inline":true,"label":"theme","permalink":"/blog/tags/theme"},{"inline":true,"label":"images","permalink":"/blog/tags/images"}],"readingTime":2.44,"hasTruncateMarker":true,"authors":[{"name":"Michal Nowikowski","title":"Kraken Founder. I\u2019m software engineer focused on full-stack programming and improving software processes.","url":"https://www.linkedin.com/in/godfryd","imageURL":"https://avatars1.githubusercontent.com/u/176567?s=460&u=4ade22771af9569be24b20278d24ef60da6eb0bb&v=4","key":"mike","page":null}],"frontMatter":{"slug":"job-designer-and-more-0-962","title":"Job Designer and More - 0.962 Release","authors":"mike","tags":["kraken","release","theme","images"]},"unlisted":false,"prevItem":{"title":"Hello Worlds in 22 Langs on Kraken CI","permalink":"/blog/hello-worlds-in-22-langs-on-kraken-ci"},"nextItem":{"title":"MLOps with MLflow on Kraken CI","permalink":"/blog/mlops-with-mlflow-on-kraken-ci"}}')},3977(e,n,s){s.r(n),s.d(n,{assets:()=>h,contentTitle:()=>o,default:()=>p,frontMatter:()=>i,metadata:()=>a,toc:()=>d});var a=s(1751),t=s(4848),r=s(8453),l=s(4074);s(547);const i={slug:"job-designer-and-more-0-962",title:"Job Designer and More - 0.962 Release",authors:"mike",tags:["kraken","release","theme","images"]},o=void 0,h={authorsImageUrls:[void 0]},d=[{value:"Job Designer",id:"job-designer",level:3},{value:"Shell Tool Improvements",id:"shell-tool-improvements",level:3},{value:"Flow Duration on Branch Chart",id:"flow-duration-on-branch-chart",level:3},{value:"New Base Docker Images",id:"new-base-docker-images",level:3},{value:"Split Results Chart",id:"split-results-chart",level:3}];function c(e){const n={a:"a",code:"code",h3:"h3",li:"li",p:"p",pre:"pre",ul:"ul",...(0,r.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(n.p,{children:["The job designer\n(",(0,t.jsx)(n.a,{href:"https://github.com/Kraken-CI/kraken/issues/171",children:"#171"}),") is the main\nfeature in\n",(0,t.jsx)(n.a,{href:"https://github.com/Kraken-CI/kraken/releases/tag/v0.962",children:"0.962"}),"\nrelease."]}),"\n",(0,t.jsx)(n.p,{children:"Besides that, it contains:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["support for multiline shell scripts and selecting shell executable\n(",(0,t.jsx)(n.a,{href:"https://github.com/Kraken-CI/kraken/issues/183",children:"#183"})," and\n",(0,t.jsx)(n.a,{href:"https://github.com/Kraken-CI/kraken/issues/184",children:"#184"}),") charts"]}),"\n",(0,t.jsxs)(n.li,{children:["new chart showing flows duration in a branch (",(0,t.jsx)(n.a,{href:"https://github.com/Kraken-CI/kraken/issues/173",children:"#173"}),")"]}),"\n",(0,t.jsx)(n.li,{children:"multiple new base docker images for various programming languages"}),"\n",(0,t.jsxs)(n.li,{children:["split results chart to pass ratio chart and passed/total chart (",(0,t.jsx)(n.a,{href:"https://github.com/Kraken-CI/kraken/issues/183",children:"#187"}),")"]}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:"More information about these changes is below."}),"\n",(0,t.jsx)(n.h3,{id:"job-designer",children:"Job Designer"}),"\n",(0,t.jsx)(n.p,{children:"Now it is possible to design job steps using a UI available on a\nbranch management page."}),"\n",(0,t.jsx)(l.A,{img:"screen-branch-prepare-step-button.png"}),"\n",(0,t.jsxs)(n.p,{children:["The ",(0,t.jsx)(n.code,{children:"Prepare Step"})," button shows the job designer dialog."]}),"\n",(0,t.jsx)(l.A,{img:"screen-branch-prepare-step-dialog.png"}),"\n",(0,t.jsx)(n.p,{children:"The dialog shows all available fields of a step with descriptions and\ninput boxes pre-filled with default values. These fields are available\nfor a tool selected in the dropdown at the top of the dialog. Below,\nthere is the step generated in JSON format."}),"\n",(0,t.jsxs)(n.p,{children:["In the case of the picture above, there is a shell tool\nselected. There are multiple fields available. A few are used:\n",(0,t.jsx)(n.code,{children:"cmd"}),", ",(0,t.jsx)(n.code,{children:"cwd"})," and ",(0,t.jsx)(n.code,{children:"shell_exec"}),". The generated step in JSON contains\nthese fields with user-provided values."]}),"\n",(0,t.jsx)(n.p,{children:"Now a user may copy the generated step and then paste it into the stage\nschema code."}),"\n",(0,t.jsx)(n.h3,{id:"shell-tool-improvements",children:"Shell Tool Improvements"}),"\n",(0,t.jsxs)(n.p,{children:["The shell tool got two improvements. One allows for entering a multiline\nscript instead of just one command. The other one allows for indicating\nan alternative shell executable - the default one is ",(0,t.jsx)(n.code,{children:"/bin/sh"}),"."]}),"\n",(0,t.jsx)(n.p,{children:"A multiline script can be provided in the following way:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'{\n   "steps": [{\n       "tool": "shell",\n       "script": """\n           echo \'multiline script\'\n           ls -al\n           echo \'completed\'\n       """\n   }]\n}\n'})}),"\n",(0,t.jsxs)(n.p,{children:["Changing default shell executable to e.g. ",(0,t.jsx)(n.code,{children:"zsh"})," goes this way:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'{\n   "steps": [{\n       "tool": "shell",\n       "cmd": "echo $ZSH_VERSION",\n       "shell_exec": "zsh"\n   }]\n}\n'})}),"\n",(0,t.jsxs)(n.p,{children:["More in the ",(0,t.jsx)(n.a,{href:"/docs/schema#shell",children:"docs"}),"."]}),"\n",(0,t.jsx)(n.h3,{id:"flow-duration-on-branch-chart",children:"Flow Duration on Branch Chart"}),"\n",(0,t.jsxs)(n.p,{children:["On the branch management page, on ",(0,t.jsx)(n.code,{children:"Stats and Charts"})," tab, there are\nbasic stats about the branch, like the total number of flows or the\naverage flow duration in the last week. Below these stats, a chart\nshows the duration of flows over time."]}),"\n",(0,t.jsx)(l.A,{img:"screen-branch-stats.png"}),"\n",(0,t.jsx)(n.p,{children:"The whole stats and charts are presented in two instances: one for CI\nand the other one for DEV flows."}),"\n",(0,t.jsx)(n.h3,{id:"new-base-docker-images",children:"New Base Docker Images"}),"\n",(0,t.jsxs)(n.p,{children:["There are multiple new Docker images prepared to be used in Kraken CI.\nThe full list is available in the ",(0,t.jsx)(n.a,{href:"/docs/docker-executor#language-images",children:"docs page"}),"."]}),"\n",(0,t.jsx)(n.h3,{id:"split-results-chart",children:"Split Results Chart"}),"\n",(0,t.jsx)(n.p,{children:"Initially, the pass ratio was shown together with total and passed\ncounts on the same chart. Now that is split into two charts: 1) pass\nratio chart and 2) total and passed counts."})]})}function p(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(c,{...e})}):c(e)}},4074(e,n,s){s.d(n,{A:()=>t});s(6540);var a=s(4848);const t=e=>{let{img:n}=e;return(0,a.jsx)("a",{href:"/img/"+n,target:"blank",children:(0,a.jsx)("img",{src:"/img/"+n,style:{boxShadow:"0 10px 10px 5px #777",marginBottom:"30px"}})})}}}]);