"use strict";(self.webpackChunkkraken_ci_website=self.webpackChunkkraken_ci_website||[]).push([[2596],{4137:function(e,n,t){t.d(n,{Zo:function(){return u},kt:function(){return h}});var r=t(7294);function i(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function a(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function o(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?a(Object(t),!0).forEach((function(n){i(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):a(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function s(e,n){if(null==e)return{};var t,r,i=function(e,n){if(null==e)return{};var t,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)t=a[r],n.indexOf(t)>=0||(i[t]=e[t]);return i}(e,n);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)t=a[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(i[t]=e[t])}return i}var l=r.createContext({}),p=function(e){var n=r.useContext(l),t=n;return e&&(t="function"==typeof e?e(n):o(o({},n),e)),t},u=function(e){var n=p(e.components);return r.createElement(l.Provider,{value:n},e.children)},d={inlineCode:"code",wrapper:function(e){var n=e.children;return r.createElement(r.Fragment,{},n)}},c=r.forwardRef((function(e,n){var t=e.components,i=e.mdxType,a=e.originalType,l=e.parentName,u=s(e,["components","mdxType","originalType","parentName"]),c=p(t),h=i,m=c["".concat(l,".").concat(h)]||c[h]||d[h]||a;return t?r.createElement(m,o(o({ref:n},u),{},{components:t})):r.createElement(m,o({ref:n},u))}));function h(e,n){var t=arguments,i=n&&n.mdxType;if("string"==typeof e||i){var a=t.length,o=new Array(a);o[0]=c;var s={};for(var l in n)hasOwnProperty.call(n,l)&&(s[l]=n[l]);s.originalType=e,s.mdxType="string"==typeof e?e:i,o[1]=s;for(var p=2;p<a;p++)o[p]=t[p];return r.createElement.apply(null,o)}return r.createElement.apply(null,t)}c.displayName="MDXCreateElement"},8742:function(e,n,t){var r=t(7294);n.Z=function(e){var n=e.img;return r.createElement("a",{href:"/img/"+n,target:"blank"},r.createElement("img",{src:"/img/"+n,style:{boxShadow:"0 10px 10px 5px #777",marginBottom:"30px"}}))}},3795:function(e,n,t){t.r(n),t.d(n,{assets:function(){return d},contentTitle:function(){return p},default:function(){return m},frontMatter:function(){return l},metadata:function(){return u},toc:function(){return c}});var r=t(3117),i=t(102),a=(t(7294),t(4137)),o=t(8742),s=["components"],l={id:"users",title:"Users"},p=void 0,u={unversionedId:"users",id:"users",title:"Users",description:"Kraken CI has user authentication and authorizations. Before a user",source:"@site/docs/users.mdx",sourceDirName:".",slug:"/users",permalink:"/docs/users",draft:!1,editUrl:"https://github.com/kraken-ci/website/edit/master/docs/users.mdx",tags:[],version:"current",frontMatter:{id:"users",title:"Users"},sidebar:"someSidebar",previous:{title:"Agents",permalink:"/docs/agents"},next:{title:"Global Storage",permalink:"/docs/storage"}},d={},c=[{value:"Managing Users",id:"managing-users",level:2},{value:"Adding a User",id:"adding-a-user",level:2},{value:"Basic User Options",id:"basic-user-options",level:2},{value:"User Roles",id:"user-roles",level:2},{value:"Identity Providers",id:"identity-providers",level:2},{value:"LDAP",id:"ldap",level:3},{value:"OpenID Connect and OAuth",id:"openid-connect-and-oauth",level:3}],h={toc:c};function m(e){var n=e.components,t=(0,i.Z)(e,s);return(0,a.kt)("wrapper",(0,r.Z)({},h,t,{components:n,mdxType:"MDXLayout"}),(0,a.kt)("p",null,"Kraken CI has user authentication and authorizations. Before a user\nstarts using the system, he/she must log in to the system. Still, a\nuser does not have access to all resources. Access is limited by\nroles that are assigned to a user."),(0,a.kt)("h2",{id:"managing-users"},"Managing Users"),(0,a.kt)("p",null,"Managing users is only available to ",(0,a.kt)("inlineCode",{parentName:"p"},"admin")," user and users with\n",(0,a.kt)("inlineCode",{parentName:"p"},"superadmin")," role.  The user management page can be accessed via the\n",(0,a.kt)("inlineCode",{parentName:"p"},"Configuration")," menu at the top right, then ",(0,a.kt)("inlineCode",{parentName:"p"},"Users")," position and\nagain ",(0,a.kt)("inlineCode",{parentName:"p"},"Users")," menu item."),(0,a.kt)(o.Z,{img:"screen-users-menu.png",mdxType:"Screen"}),(0,a.kt)("p",null,"Clicking it leads to the users management page."),(0,a.kt)(o.Z,{img:"screen-users.png",mdxType:"Screen"}),(0,a.kt)("p",null,"On the left is an ",(0,a.kt)("inlineCode",{parentName:"p"},"Add User")," button and a table with users."),(0,a.kt)("p",null,"Selecting a user in this table shows its details in the right panel.\nThis user panel allows for changing a user password, disabling a user,\nassigning ",(0,a.kt)("inlineCode",{parentName:"p"},"superadmin")," role and assigning one of the three predefined\nroles in a selected project."),(0,a.kt)("h2",{id:"adding-a-user"},"Adding a User"),(0,a.kt)("p",null,"Clicking the ",(0,a.kt)("inlineCode",{parentName:"p"},"Add User")," button opens a dialog that allows for entering a\nuser name and a password."),(0,a.kt)(o.Z,{img:"screen-users-add-new.png",mdxType:"Screen"}),(0,a.kt)("p",null,"When adding is accepted by the ",(0,a.kt)("inlineCode",{parentName:"p"},"Add User")," button in the dialog box,\nthen it is shown in the users table. Selecting the user shows its\ndetails in the user panel on the right side."),(0,a.kt)("h2",{id:"basic-user-options"},"Basic User Options"),(0,a.kt)("p",null,"In the user panel, it is possible to change a user password by clicking\n",(0,a.kt)("inlineCode",{parentName:"p"},"Change Password")," button."),(0,a.kt)("p",null,"It is also possible to disable a user account. A disabled user cannot\nlogin into the system and cannot do any operation if it is already\nlogged in to the system."),(0,a.kt)("h2",{id:"user-roles"},"User Roles"),(0,a.kt)("p",null,"There are two kinds of roles:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"global role ",(0,a.kt)("inlineCode",{parentName:"li"},"superadmin")),(0,a.kt)("li",{parentName:"ul"},"three predefined roles per project: ",(0,a.kt)("inlineCode",{parentName:"li"},"Viewer"),", ",(0,a.kt)("inlineCode",{parentName:"li"},"Power User")," and ",(0,a.kt)("inlineCode",{parentName:"li"},"Admin"))),(0,a.kt)("p",null,(0,a.kt)("inlineCode",{parentName:"p"},"superadmin")," role allows for all available operations in the system."),(0,a.kt)("p",null,"The per-project roles give some rights only to a given project. The\nrights are grnted by the roles:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"Viewer")," - allows for viewing data only: browsing branches, their\nflows, results, etc."),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"Power User")," - extends ",(0,a.kt)("inlineCode",{parentName:"li"},"Viewer")," role by allowing for triggering\nactions like: run a flow, rerun a job, define new stage, etc."),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"Admin")," - extends ",(0,a.kt)("inlineCode",{parentName:"li"},"Power User")," role by allowing for e.g. deleting a\nbranch or a project, managing project secrets.")),(0,a.kt)(o.Z,{img:"screen-users-roles.png",mdxType:"Screen"}),(0,a.kt)("p",null,"The selected user may be assigned to a given project with a given\nrole. Later this role can be changed by clicking a role for a given\nproject. At the end, it is possible to remove a user from a particular\nproject."),(0,a.kt)("h2",{id:"identity-providers"},"Identity Providers"),(0,a.kt)("p",null,"By default, user authentication is happening locally in the Kraken\nserver. Still, it is possible to provide an external source of users and\nmeans for authentication by so-called Identity Providers. This also allows\nsetting up Single Sign-On (SSO) scheme ie. users may sign in once\nin a central authentication system and then use it for authentication in\nother systems and services."),(0,a.kt)("p",null,"To set this up, go to the ",(0,a.kt)("inlineCode",{parentName:"p"},"Configuration")," menu at the top right, then\n",(0,a.kt)("inlineCode",{parentName:"p"},"Users")," position and ",(0,a.kt)("inlineCode",{parentName:"p"},"Identity Providers")," menu item."),(0,a.kt)(o.Z,{img:"screen-idp-menu.png",mdxType:"Screen"}),(0,a.kt)("p",null,"This leads to the Settings web page with the ",(0,a.kt)("inlineCode",{parentName:"p"},"Identity Providers")," tab."),(0,a.kt)(o.Z,{img:"screen-idp-all-disabled.png",mdxType:"Screen"}),(0,a.kt)("p",null,"On this tab, there are 2 sections available:"),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},"LDAP"),(0,a.kt)("li",{parentName:"ol"},"OpenID Connect / OAuth 2")),(0,a.kt)("h3",{id:"ldap"},"LDAP"),(0,a.kt)("p",null,"The source of users' identity is an LDAP server, which is used for\nusers' authenticating. The login page is the same for local users in\nKraken Web UI. Kraken Server authenticates users using credentials\nprovided by them on this login page. Kraken Server connects to LDAP\nServer and checks if a user is present in LDAP server and his/her\npassword is correct."),(0,a.kt)("p",null,"To perform this operation, Kraken Server needs a few settings that will\nallow Kraken Server to talk to LDAP Server. These settings need to be\nprovided in the following form:"),(0,a.kt)(o.Z,{img:"screen-idp-ldap.png",mdxType:"Screen"}),(0,a.kt)("p",null,(0,a.kt)("inlineCode",{parentName:"p"},"Server Address")," is an apparent field. ",(0,a.kt)("inlineCode",{parentName:"p"},"Bind DN")," (Distinguished Name)\nand ",(0,a.kt)("inlineCode",{parentName:"p"},"Bind Password")," are used to authenticate Kraken Server to LDAP\nServer. They are needed to connect to LDAP Server. ",(0,a.kt)("inlineCode",{parentName:"p"},"Base DN")," is a\nsubtree in LDAP tree where users are looked for. ",(0,a.kt)("inlineCode",{parentName:"p"},"User Search\nFilter")," is an LDAP query expression used to look for users in\n",(0,a.kt)("inlineCode",{parentName:"p"},"Base DN")," subtree. In ",(0,a.kt)("inlineCode",{parentName:"p"},"%s")," placeholder is inserted a user's username\nthat is provided by a user on the login page."),(0,a.kt)("p",null,"After saving the settings using the ",(0,a.kt)("inlineCode",{parentName:"p"},"Save Settings")," button on the\nbottom of the page, it is possible to check if configured parameters\nare correct and if they allow to establish a connection to LDAP\nServer. For that purpose, the ",(0,a.kt)("inlineCode",{parentName:"p"},"Test LDAP Connection")," button should be\nused."),(0,a.kt)("h3",{id:"openid-connect-and-oauth"},"OpenID Connect and OAuth"),(0,a.kt)("p",null,"In the case of OpenID Connect and OAuth, the source of users' identity\nis OAuth Authorization Server. In this case, Kraken Web UI redirects\nto an external login page hosted on Authorization Server. A user\nenters his/her credentials to this server and then this server\nredirects the browser back to Kraken Web UI, providing a user\ntoken. Kraken Server is validating this token against the\nAuthorization Server to confirm that this is a valid user. If all is\nok, a user is allowed by Kraken Server to enter Kraken Web UI."),(0,a.kt)("p",null,"To perform this operation, Kraken Server needs a few settings that will\nallow Kraken Server to talk to OAuth Authorization Server. Kraken\nsupports several providers of OAuth Authorization Servers. They are\nGoogle, Microsoft, GitHub and Auth0. The settings for these providers\nmay be provided in the following forms:"),(0,a.kt)(o.Z,{img:"screen-idp-google-ms.png",mdxType:"Screen"}),(0,a.kt)(o.Z,{img:"screen-idp-github-auth0.png",mdxType:"Screen"}),(0,a.kt)("p",null,"In each case, ",(0,a.kt)("inlineCode",{parentName:"p"},"Client ID")," and ",(0,a.kt)("inlineCode",{parentName:"p"},"Client Secret")," are needed. In the\ncase of Auth0, the ",(0,a.kt)("inlineCode",{parentName:"p"},"OpenID Config URL")," is also required, which is\nspecific per organization."),(0,a.kt)("p",null,"More details on how to set up OpenID Connect and OAuth of the providers\nside can be found in the following documentation pages:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"https://developers.google.com/identity/openid-connect/openid-connect#python"},"Google")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"https://learn.microsoft.com/en-us/azure/active-directory/develop/v2-protocols-oidc"},"Microsoft")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"https://docs.github.com/en/developers/apps/building-oauth-apps/authorizing-oauth-apps"},"GitHub")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"https://auth0.com/docs/quickstart/webapp/python/01-login"},"Auth0"))))}m.isMDXComponent=!0}}]);