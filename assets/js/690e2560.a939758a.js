"use strict";(self.webpackChunkkraken_ci_website=self.webpackChunkkraken_ci_website||[]).push([[8151],{4064:function(e,t,n){n.r(t),n.d(t,{assets:function(){return d},contentTitle:function(){return g},default:function(){return m},frontMatter:function(){return r},metadata:function(){return p},toc:function(){return c}});var s=n(3117),a=n(102),o=(n(7294),n(4137)),l=n(8742),i=(n(5944),["components"]),r={slug:"standing-out-logs-handling",title:"Standing out Logs Handling",authors:"mike",tags:["kraken","devops","cicd"]},g=void 0,p={permalink:"/blog/standing-out-logs-handling",editUrl:"https://github.com/kraken-ci/website/edit/master/blog/blog/2023-02-06-standing-out-logs-handling.mdx",source:"@site/blog/2023-02-06-standing-out-logs-handling.mdx",title:"Standing out Logs Handling",description:"The Kraken version 0.1126",date:"2023-02-06T00:00:00.000Z",formattedDate:"February 6, 2023",tags:[{label:"kraken",permalink:"/blog/tags/kraken"},{label:"devops",permalink:"/blog/tags/devops"},{label:"cicd",permalink:"/blog/tags/cicd"}],readingTime:2.885,hasTruncateMarker:!0,authors:[{name:"Michal Nowikowski",title:"Kraken Founder. I\u2019m software engineer focused on full-stack programming and improving software processes.",url:"https://www.linkedin.com/in/godfryd",imageURL:"https://avatars1.githubusercontent.com/u/176567?s=460&u=4ade22771af9569be24b20278d24ef60da6eb0bb&v=4",key:"mike"}],frontMatter:{slug:"standing-out-logs-handling",title:"Standing out Logs Handling",authors:"mike",tags:["kraken","devops","cicd"]},nextItem:{title:"Support for CCTray",permalink:"/blog/support-for-cctray"}},d={authorsImageUrls:[void 0]},c=[{value:"Single-line and Multi-line Secrets Masking",id:"single-line-and-multi-line-secrets-masking",level:3},{value:"Coloring ANSI Codes",id:"coloring-ansi-codes",level:3},{value:"Swithing Timestamps On/Off",id:"swithing-timestamps-onoff",level:3},{value:"Autoscroll",id:"autoscroll",level:3},{value:"Job Logs Split by Steps",id:"job-logs-split-by-steps",level:3},{value:"Steps Status and Metadata",id:"steps-status-and-metadata",level:3},{value:"Download Whole Step Log",id:"download-whole-step-log",level:3},{value:"Paging Logs",id:"paging-logs",level:3}],u={toc:c};function m(e){var t=e.components,n=(0,a.Z)(e,i);return(0,o.kt)("wrapper",(0,s.Z)({},u,n,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("p",null,"The Kraken version ",(0,o.kt)("a",{parentName:"p",href:"https://github.com/Kraken-CI/kraken/releases/tag/v0.1126"},"0.1126"),"\nintroduces much improved logs handling and presentation."),(0,o.kt)("p",null,"The standing-out features connected with logs are:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"single-line and ",(0,o.kt)("em",{parentName:"li"},"multi-line")," secrets masking"),(0,o.kt)("li",{parentName:"ul"},"coloring ANSI codes"),(0,o.kt)("li",{parentName:"ul"},"no issue with handling huge logs containing even more than 10.000 lines"),(0,o.kt)("li",{parentName:"ul"},"switching timestamps on/off"),(0,o.kt)("li",{parentName:"ul"},"auto scroll when at the bottom"),(0,o.kt)("li",{parentName:"ul"},"paging logs")),(0,o.kt)("p",null,"And the new features introduced by this Kraken version:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"job logs are split by steps sections in UI"),(0,o.kt)("li",{parentName:"ul"},"steps status and metadata presented at the top of each step logs section"),(0,o.kt)("li",{parentName:"ul"},"download a step log")),(0,o.kt)("p",null,"More details are below."),(0,o.kt)("h3",{id:"single-line-and-multi-line-secrets-masking"},"Single-line and Multi-line Secrets Masking"),(0,o.kt)("p",null,"It is possible to define ",(0,o.kt)("a",{parentName:"p",href:"/docs/secrets"},"secrets")," on a project. Then\nthese secrets can be used in workflow schema directly in shell commands\nor as environment variables. Most often, they might be visible in\nlogs. Thankfully, Kratos mask secrets - a secret in the log is replaced\nby six asterisks (",(0,o.kt)("inlineCode",{parentName:"p"},"*")," sign). Kraken can mask secrets that are single\nline, for example, a password, but also it can secret multi-line\nsecrets, e.g. SSH private key that may span about 30 lines. In both\ncases, these secrets will be replaced with asterisks in the log."),(0,o.kt)("p",null,"The secrets are caught quite early and do not leave a machine\nthat traces them to logs. The log database stores only masked\npasswords. Example of masking below:"),(0,o.kt)(l.Z,{img:"screen-logs-masked-secrets2.png",mdxType:"Screen"}),(0,o.kt)("p",null,"A very long, multi-line secret has been replaced by 6 asterisk signs."),(0,o.kt)("h3",{id:"coloring-ansi-codes"},"Coloring ANSI Codes"),(0,o.kt)("p",null,"Quite often in CI process, there are used tools that color their\noutput. This is achieved\nby ",(0,o.kt)("a",{parentName:"p",href:"https://en.wikipedia.org/wiki/ANSI_escape_code#Colors"},"ANSI codes"),"\nprinted to a terminal. Kraken can find them and replace them with\ncolors in Web UI."),(0,o.kt)("p",null,"An example of a basic color palette in the log:"),(0,o.kt)(l.Z,{img:"screen-logs-ansi-colors.png",mdxType:"Screen"}),(0,o.kt)("h3",{id:"swithing-timestamps-onoff"},"Swithing Timestamps On/Off"),(0,o.kt)("p",null,"Kraken allows a user to switch on and off displaying timestamps. These\nare timestamps added during collecting logs and storing them in a\ndatabase. They may not match with timestamps that are already present\ninside the log, so they can be switched off. When there are no\ntimestamps in the original log, Kraken timestamps can be switched on\nand be pretty helpful."),(0,o.kt)("p",null,"Timestamps are switched off:"),(0,o.kt)(l.Z,{img:"screen-logs-ts-off.png",mdxType:"Screen"}),(0,o.kt)("p",null,"Timestamps are switched on:"),(0,o.kt)(l.Z,{img:"screen-logs-ts-on.png",mdxType:"Screen"}),(0,o.kt)("h3",{id:"autoscroll"},"Autoscroll"),(0,o.kt)("p",null,"When the scroll bar is at the bottom position then any new logs\nfetched automatically will trigger scrolling to the bottom so the new\nlog content is visible."),(0,o.kt)("h3",{id:"job-logs-split-by-steps"},"Job Logs Split by Steps"),(0,o.kt)("p",null,"In Kraken Web UI, the job log is divided into steps sections. Each\nsection has its title bar that, by clicking, allows a user to expand\nthe section to see its details and logs. Each step log is separate, so\nit is easier to browse logs of steps than handling one big job log."),(0,o.kt)(l.Z,{img:"screen-logs-steps.png",mdxType:"Screen"}),(0,o.kt)("h3",{id:"steps-status-and-metadata"},"Steps Status and Metadata"),(0,o.kt)("p",null,"The step details bar presents information about status and duration\nbut also step parameters. Below the bar, there are logs with control\nbuttons for navigating logs."),(0,o.kt)(l.Z,{img:"screen-logs-step-status.png",mdxType:"Screen"}),(0,o.kt)("h3",{id:"download-whole-step-log"},"Download Whole Step Log"),(0,o.kt)("p",null,"A log of each section can be downloaded separately."),(0,o.kt)(l.Z,{img:"screen-logs-step-download.png",mdxType:"Screen"}),(0,o.kt)("h3",{id:"paging-logs"},"Paging Logs"),(0,o.kt)("p",null,"A step log pane has control buttons allowing a user to navigate\nlogs. A user may load the previous or next page or jump to the first\nor last page. A user may load the whole log, he/she may also scroll to the\nbottom of the log."),(0,o.kt)(l.Z,{img:"screen-logs-paging.png",mdxType:"Screen"}))}m.isMDXComponent=!0},8742:function(e,t,n){var s=n(7294);t.Z=function(e){var t=e.img;return s.createElement("a",{href:"/img/"+t,target:"blank"},s.createElement("img",{src:"/img/"+t,style:{boxShadow:"0 10px 10px 5px #777",marginBottom:"30px"}}))}}}]);