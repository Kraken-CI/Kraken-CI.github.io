"use strict";(self.webpackChunkkraken_ci_website=self.webpackChunkkraken_ci_website||[]).push([[5435],{4074(e,n,s){s.d(n,{A:()=>i});s(6540);var t=s(4848);const i=e=>{let{img:n}=e;return(0,t.jsx)("a",{href:"/img/"+n,target:"blank",children:(0,t.jsx)("img",{src:"/img/"+n,style:{boxShadow:"0 10px 10px 5px #777",marginBottom:"30px"}})})}},4452(e,n,s){s.r(n),s.d(n,{assets:()=>u,contentTitle:()=>d,default:()=>m,frontMatter:()=>l,metadata:()=>t,toc:()=>h});const t=JSON.parse('{"id":"autoscale-in-cloud","title":"Autoscale in Cloud","description":"Kraken CI allows for creating executing machines dynamically in the","source":"@site/docs/autoscale-in-cloud.mdx","sourceDirName":".","slug":"/autoscale-in-cloud","permalink":"/docs/autoscale-in-cloud","draft":false,"unlisted":false,"editUrl":"https://github.com/kraken-ci/website/edit/master/docs/autoscale-in-cloud.mdx","tags":[],"version":"current","frontMatter":{"id":"autoscale-in-cloud","title":"Autoscale in Cloud"},"sidebar":"someSidebar","previous":{"title":"Webhooks","permalink":"/docs/webhooks"},"next":{"title":"Basics","permalink":"/docs/test-results-basics"}}');var i=s(4848),r=s(8453),a=s(9489),o=s(7227),c=s(4074);const l={id:"autoscale-in-cloud",title:"Autoscale in Cloud"},d=void 0,u={},h=[{value:"Preparing Cloud Environment",id:"preparing-cloud-environment",level:2},{value:"Global Cloud Settings",id:"global-cloud-settings",level:2},{value:"Preparing VM Image",id:"preparing-vm-image",level:2},{value:"Configuration in Agents Groups",id:"configuration-in-agents-groups",level:2},{value:"Usage",id:"usage",level:2}];function p(e){const n={a:"a",code:"code",h2:"h2",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.p,{children:"Kraken CI allows for creating executing machines dynamically in the\ncloud when they are needed. They can be either virtual machines or\ncontainers. When new jobs are triggered and there are no agents\navailable for them, new machines with Kraken agents are\nspawned. The configuration of the way of spawning new machines is\nlocated in agent groups."}),"\n",(0,i.jsx)(n.p,{children:"Currently, Kraken CI autoscaling is supporting:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"AWS EC2 virtual machines"}),"\n",(0,i.jsx)(n.li,{children:"AWS ECS containers"}),"\n",(0,i.jsx)(n.li,{children:"Azure virtual machines"}),"\n",(0,i.jsx)(n.li,{children:"Kubernetes"}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"preparing-cloud-environment",children:"Preparing Cloud Environment"}),"\n",(0,i.jsxs)(a.A,{children:[(0,i.jsxs)(o.A,{value:"aws-ec2",label:"AWS EC2",default:!0,children:[(0,i.jsx)(n.p,{children:"In the case of AWS EC2, it is required to assign proper permissions to the\naccessing user so that Kraken can create or destroy EC2\ninstances. The list of all requires permissions looks as follows:"}),(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n    "Version": "2012-10-17",\n    "Statement": [\n        {\n            "Sid": "VisualEditor0",\n            "Effect": "Allow",\n            "Action": [\n                "ec2:AuthorizeSecurityGroupIngress",\n                "ec2:CreateKeyPair",\n                "ec2:CreateSecurityGroup",\n                "ec2:CreateTags",\n                "ec2:DeleteKeyPair",\n                "ec2:DescribeInstances",\n                "ec2:DescribeInstanceStatus"\n                "ec2:DescribeInstanceTypeOfferings",\n                "ec2:DescribeRegions",\n                "ec2:DescribeSecurityGroups",\n                "ec2:DescribeVpcs",\n                "ec2:RunInstances",\n                "ec2:TerminateInstances",\n            ],\n            "Resource": "*"\n        }\n    ]\n}\n'})})]}),(0,i.jsxs)(o.A,{value:"aws-ecs",label:"AWS ECS",children:[(0,i.jsx)(n.p,{children:"In the case of AWS ECS, it is required to assign proper permissions to\nthe accessing user so that Kraken can create or destroy ECS\ntasks. The list of all requires permissions looks as follows:"}),(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n    "Version": "2012-10-17",\n    "Statement": [\n        {\n            "Sid": "VisualEditor0",\n            "Effect": "Allow",\n            "Action": [\n                "ec2:DescribeNetworkInterfaces",\n                "ecs:RunTask",\n                "ecs:StopTask",\n                "ecs:DescribeTasks",\n                "ecs:ListTaskDefinitions"\n            ],\n            "Resource": "*"\n        },\n        {\n            "Sid": "VisualEditor1",\n            "Effect": "Allow",\n            "Action": "iam:PassRole",\n            "Resource": "arn:aws:iam::*:role/ecsTaskExecutionRole"\n        }\n    ]\n}\n'})})]}),(0,i.jsxs)(o.A,{value:"kubernetes",label:"Kubernetes",children:[(0,i.jsx)(n.p,{children:"For Kubernetes, there are two accessing variants: Kraken CI is\ninstalled inside Kubernetes cluster or outside. In both cases, a proper\naccess must be configured. When Kraken is installed inside a\nKubernetes cluster then this is made using Helm chart and it also sets\nservice account and proper permissions. When Kraken CI sits outside of\nKubernetes cluster, then the service account and permissions must be\nconfigured in the following way."}),(0,i.jsx)(n.p,{children:"The content:"}),(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",children:'apiVersion: v1\nkind: Namespace\nmetadata:\n  name: <namespace>\n\n---\n\napiVersion: v1\nkind: ServiceAccount\nmetadata:\n  name: kraken\n  namespace: <namespace>\n\n---\n\napiVersion: rbac.authorization.k8s.io/v1\nkind: ClusterRole\n\nmetadata:\n  name: kraken-role\n\nrules:\n  - apiGroups: [""]\n    resources: ["nodes", "services", "pods", "endpoints", "namespaces"]\n    verbs: ["get", "list", "watch"]\n  - apiGroups: [""]\n    resources: ["pods"]\n    verbs: ["create", "delete"]\n\n---\n\napiVersion: rbac.authorization.k8s.io/v1\nkind: ClusterRoleBinding\n\nmetadata:\n  name: kraken-crb\n\nroleRef:\n  kind: ClusterRole\n  name: kraken-role\n  apiGroup: rbac.authorization.k8s.io\n\nsubjects:\n  - kind: ServiceAccount\n    name: kraken\n    namespace: <namespace>\n'})}),(0,i.jsxs)(n.p,{children:["should be copied and pasted to ",(0,i.jsx)(n.code,{children:"kraken-serviceaccount.yaml"})," file or\ndownloaded from ",(0,i.jsx)(n.a,{target:"_blank","data-noBrokenLinkCheck":!0,href:s(5196).A+"",children:"here"}),". Before creating\nthe resources, set your namespace by replacing all occurrences of\n",(0,i.jsx)(n.code,{children:"<namespace>"})," with e.g. ",(0,i.jsx)(n.code,{children:"kraken"}),"."]}),(0,i.jsxs)(n.p,{children:["And then create these resources using ",(0,i.jsx)(n.code,{children:"kubectl"}),":"]}),(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-console",children:"kubectl apply -f kraken-serviceaccount.yaml\n"})}),(0,i.jsx)(n.p,{children:"This will create:"}),(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["an indicated namespace (e.g. ",(0,i.jsx)(n.code,{children:"kraken"}),"),"]}),"\n",(0,i.jsxs)(n.li,{children:["a service account ",(0,i.jsx)(n.code,{children:"kraken"}),","]}),"\n",(0,i.jsxs)(n.li,{children:["a cluster role ",(0,i.jsx)(n.code,{children:"kraken-role"})," that allows browsing nodes, services,\npods, endpoints and namespaces, and creating and deleting pods,"]}),"\n",(0,i.jsxs)(n.li,{children:["cluster role binding ",(0,i.jsx)(n.code,{children:"kraken-crb"})," that assigns ",(0,i.jsx)(n.code,{children:"kraken-role"})," role to ",(0,i.jsx)(n.code,{children:"kraken"}),"\nservice account"]}),"\n"]}),(0,i.jsx)(n.p,{children:"Service account's token will be used in the next steps."})]})]}),"\n",(0,i.jsx)(n.h2,{id:"global-cloud-settings",children:"Global Cloud Settings"}),"\n",(0,i.jsx)(n.p,{children:"First, global settings must be set to allow access to a given cloud\nprovider. In Web UI, on Kraken -> Settings page, in Cloud tab,\nthere is a form for collecting credentials to cloud providers:"}),"\n",(0,i.jsx)(c.A,{img:"screen-settings-cloud.png"}),"\n",(0,i.jsxs)(a.A,{children:[(0,i.jsx)(o.A,{value:"aws",label:"AWS",default:!0,children:(0,i.jsxs)(n.p,{children:["In the case of AWS, ",(0,i.jsx)(n.code,{children:"Access Key"})," and ",(0,i.jsx)(n.code,{children:"Secret Access Key"})," are required."]})}),(0,i.jsx)(o.A,{value:"azure",label:"Azure",children:(0,i.jsxs)(n.p,{children:["When Microsoft Azure is used, then there are required ",(0,i.jsx)(n.code,{children:"Subscription ID"}),",\n",(0,i.jsx)(n.code,{children:"Tenant ID"}),", ",(0,i.jsx)(n.code,{children:"Client ID"})," and ",(0,i.jsx)(n.code,{children:"Client Secret"}),"."]})}),(0,i.jsxs)(o.A,{value:"kubernetes",label:"Kubernetes",children:[(0,i.jsxs)(n.p,{children:["When Kraken is installed inside Kubernetes cluster, then only setting\n",(0,i.jsx)(n.code,{children:"Namespace"})," field is required, ",(0,i.jsx)(n.code,{children:"API Server URL"})," must be empty."]}),(0,i.jsxs)(n.p,{children:["When Kraken is running outside of Kubernetes cluster then all fields\nare required: ",(0,i.jsx)(n.code,{children:"API Server URL"}),", ",(0,i.jsx)(n.code,{children:"Namespace"})," and ",(0,i.jsx)(n.code,{children:"Token"}),". ",(0,i.jsx)(n.code,{children:"Namespace"}),"\nand ",(0,i.jsx)(n.code,{children:"Token"})," were created in previous steps. The following commands will\nreveal the token."]}),(0,i.jsxs)(n.p,{children:["First, check the definition of ",(0,i.jsx)(n.code,{children:"kraken"})," service account:"]}),(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-console",children:"kubectl get serviceaccounts/kraken -n <namespace> -o yaml\n"})}),(0,i.jsxs)(n.p,{children:["This should display a list of secrets at the bottom. The token should\nbe stored in a secret with a name in the form ",(0,i.jsx)(n.code,{children:"kraken-token-XXXXX"}),"\nlike e.g. ",(0,i.jsx)(n.code,{children:"kraken-token-5fvcb"}),"."]}),(0,i.jsx)(n.p,{children:"Now retrieve the token value:"}),(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-console",children:"kubectl get secret kraken-token-XXXXX -n <namespace> -o yaml\n"})}),(0,i.jsx)(n.p,{children:"The value should be under the token field, and it should be pretty\nlong. It is encoded using base64, and in this form, it should be copied\n& pasted to Kraken CI cloud settings (no decoding is required)."})]})]}),"\n",(0,i.jsx)(n.h2,{id:"preparing-vm-image",children:"Preparing VM Image"}),"\n",(0,i.jsxs)(n.p,{children:["In the case of VM environments, an operating system image needs to be\nprepared. For example, in the case of AWS EC2, this image is called\nAMI (Amazon Machine Image). There are certain requirements that this\nimage needs to meet in order to run a Kraken Agent. It should have\nPython and Git preinstalled. Additionally, the generated image should\nbe capable of running a ",(0,i.jsx)(n.code,{children:"user data"})," script during the initial\nboot. This script is used to install the Kraken Agent and your own\ninit script (which can be passed via Kraken)."]}),"\n",(0,i.jsx)(a.A,{children:(0,i.jsxs)(o.A,{value:"aws-ec2",label:"AWS EC2",default:!0,children:[(0,i.jsx)(n.p,{children:"This is an example Packer script for preparing AMI with Ubuntu:"}),(0,i.jsx)(n.p,{children:(0,i.jsx)(n.a,{href:"https://github.com/Kraken-CI/kraken/blob/master/base-images/aws-ec2/aws-ubuntu.pkr.hcl",children:"https://github.com/Kraken-CI/kraken/blob/master/base-images/aws-ec2/aws-ubuntu.pkr.hcl"})}),(0,i.jsx)(n.p,{children:"And here, you can find an example script for Ansible that prepares an AWS\nAMI image for Windows with all the dependencies included:"}),(0,i.jsx)(n.p,{children:(0,i.jsx)(n.a,{href:"https://github.com/Kraken-CI/kraken/tree/master/base-images/aws-ec2-win-ansible",children:"https://github.com/Kraken-CI/kraken/tree/master/base-images/aws-ec2-win-ansible"})})]})}),"\n",(0,i.jsx)(n.h2,{id:"configuration-in-agents-groups",children:"Configuration in Agents Groups"}),"\n",(0,i.jsxs)(n.p,{children:["Having set credentials to cloud providers, it is possible now to\nconfigure the aspects of spawning new machines. This can be done on Kraken\n-> Agents -> Groups page.  When a particular group is selected, then\nits details will be presented on a separate tab. On this tab, there is\na section ",(0,i.jsx)(n.code,{children:"Agents Deployment"}),". So the deployment can be manual\n(default) or automated to the particular cloud provider."]}),"\n",(0,i.jsxs)(a.A,{children:[(0,i.jsxs)(o.A,{value:"aws-ec2",label:"AWS EC2",default:!0,children:[(0,i.jsxs)(n.p,{children:["In the case of ",(0,i.jsx)(n.code,{children:"AWS EC2"}),", jobs are executed in AWS EC2 VMs. There are\nthe following options that can be set:"]}),(0,i.jsx)(c.A,{img:"screen-agents-groups-cloud-aws.png"}),(0,i.jsx)(n.p,{children:"The meaning of the settings is as follows."}),(0,i.jsxs)(n.p,{children:["In ",(0,i.jsx)(n.strong,{children:"General"})," section:"]}),(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Region"})," - AWS region where a machine will be spawned"]}),(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Instances Limit"})," - maximum number of spawned machines at a time"]}),(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Default AMI Image"})," - if AMI image is not provided in job definition\nthen this one is used"]}),(0,i.jsxs)(n.p,{children:["In ",(0,i.jsx)(n.strong,{children:"VM Options"})," section:"]}),(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Instance Type"})," - EC2 instance type that should be used for spawned\nmachines, the full list is available on ",(0,i.jsx)(n.a,{href:"https://aws.amazon.com/ec2/instance-types/",children:"AWS web\npage"})]}),(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Spot Instance"})," - indicates where Spot instance should be used (",(0,i.jsx)(n.a,{href:"https://aws.amazon.com/ec2/spot/",children:"AWS\ndocs"}),")"]}),(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Monitoring"})," - indicates if monitoring should be enabled (",(0,i.jsx)(n.a,{href:"https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/using-cloudwatch-new.html",children:"AWS\ndocs"}),")"]}),(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"CPU Credits Unlimited"})," - this allows having more burst power, more\nin ",(0,i.jsx)(n.a,{href:"https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/burstable-performance-instances-unlimited-mode.html",children:"AWS\ndocs"})]}),(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Disk Size"})," - the size of root disk, if 0 then default size is used otherwise provided number is counted in GB"]}),(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Init Script"})," - a value of this text is passed as UserData to EC2\ninstance, generally, this is a script that is executing during the\nfirst boot of instance (",(0,i.jsx)(n.a,{href:"https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/user-data.html",children:"AWS docs"}),")"]}),(0,i.jsxs)(n.p,{children:["In ",(0,i.jsx)(n.strong,{children:"Destruction"})," section:"]}),(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Destroy VM after N jobs"})," - this indicates that the machine should\nbe destroyed (terminated) after it is used in N Kraken jobs, default\nis 1, ie. machine is used once and then it is destroyed so each time\na new fresh machine is used for each job; 0 means that this\nmechanism is disabled"]}),(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Destroy VM after N minutes of idle time"})," - this indicates that the\nmachine should be destroyed (terminated) after it is not used in any\nKraken jobs for a given number of minutes, default is 10 minutes,\nie. a machine is destroyed if it sits idle for 10 minutes; 0 means\nthat this mechanism is disabled"]})]}),(0,i.jsxs)(o.A,{value:"aws-ecs",label:"AWS ECS",children:[(0,i.jsxs)(n.p,{children:["In the case of ",(0,i.jsx)(n.code,{children:"AWS ECS"}),", jobs are executed in containers in AWS ECS\ncluster. There are the following options that can be set:"]}),(0,i.jsx)(c.A,{img:"screen-agents-groups-cloud-aws-ecs.png"}),(0,i.jsx)(n.p,{children:"The meaning of the settings is as follows."}),(0,i.jsxs)(n.p,{children:["In ",(0,i.jsx)(n.strong,{children:"General"})," section:"]}),(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Region"})," - AWS region where a machine will be spawned"]}),(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Instances Limit"})," - maximum number of spawned machines at a time"]}),(0,i.jsxs)(n.p,{children:["In ",(0,i.jsx)(n.strong,{children:"ECS Task Options"})," section:"]}),(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Cluster"})," - the name of ECS cluster"]}),(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Subnets"})," - a list of subnets IDs separated by comma"]}),(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Security Group"})," - ID of security group used for spawned tasks and their containers"]})]}),(0,i.jsxs)(o.A,{value:"azure-vm",label:"Azure VM",children:[(0,i.jsxs)(n.p,{children:["In the case of ",(0,i.jsx)(n.code,{children:"Azure VM"}),", jobs are executed in virtual machines, in\nMicrosoft Azure VMs. There are the following options that can be set:"]}),(0,i.jsx)(c.A,{img:"screen-agents-groups-cloud-azure-vm.png"}),(0,i.jsx)(n.p,{children:"The meaning of the settings is as follows."}),(0,i.jsxs)(n.p,{children:["In ",(0,i.jsx)(n.strong,{children:"General"})," section:"]}),(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Location"})," - Azure location (region) where a machine will be spawned"]}),(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Instances Limit"})," - maximum number of spawned machines at a time"]}),(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Default Image"})," - if image is not provided in job definition\nthen this one is used; the expected format is: publisher:offer:sku",":version",",\ne.g.: Canonical:0001-com-ubuntu-server-focal:20_04-lts:20.04.202109080"]}),(0,i.jsxs)(n.p,{children:["In ",(0,i.jsx)(n.strong,{children:"VM Options"})," section:"]}),(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"VM Size"})," - Azure VM size that should be used for spawned\nmachines; more about VM sizes can be found on ",(0,i.jsx)(n.a,{href:"https://docs.microsoft.com/en-us/azure/virtual-machines/sizes",children:"Azure web\npage"})]}),(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Init Script"})," - a value of this text is passed as user_data to VM\ninstance, generally, this is a script that is executing during the\nfirst boot of instance"]}),(0,i.jsxs)(n.p,{children:["In ",(0,i.jsx)(n.strong,{children:"Destruction"})," section:"]}),(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Destroy VM after N jobs"})," - this indicates that the machine should\nbe destroyed (terminated) after it is used in N Kraken jobs, default\nis 1, ie. machine is used once and then it is destroyed so each time\na new fresh machine is used for each job; 0 means that this\nmechanism is disabled"]}),(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Destroy VM after N minutes of idle time"})," - this indicates that the\nmachine should be destroyed (terminated) after it is not used in any\nKraken jobs for a given number of minutes, default is 10 minutes,\nie. a machine is destroyed if it sits idle for 10 minutes; 0 means\nthat this mechanism is disabled"]})]}),(0,i.jsxs)(o.A,{value:"kubernetes",label:"Kubernetes",children:[(0,i.jsxs)(n.p,{children:["In the case of ",(0,i.jsx)(n.code,{children:"Kubernetes"}),", jobs are executed in containers in a\nKubernetes cluster. Kubernetes cluster can be self-hosted or hosted in\na public cloud like AWS EKS. There are the following options that can\nbe set:"]}),(0,i.jsx)(c.A,{img:"screen-agents-groups-cloud-kubernetes.png"}),(0,i.jsx)(n.p,{children:"The meaning of the settings is as follows."}),(0,i.jsxs)(n.p,{children:["In ",(0,i.jsx)(n.strong,{children:"General"})," section:"]}),(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Instances Limit"})," - maximum number of spawned containers at a time"]})]})]}),"\n",(0,i.jsx)(n.h2,{id:"usage",children:"Usage"}),"\n",(0,i.jsx)(n.p,{children:"Now when a job is assigned to an agents group with configured Agents\nDeployment then a new machine will be spawned for that job if there\nare no available agents."})]})}function m(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(p,{...e})}):p(e)}},5196(e,n,s){s.d(n,{A:()=>t});const t=s.p+"assets/files/kraken-serviceaccount-bd8f51df760fdd9340742705154f3f28.yaml"},7227(e,n,s){s.d(n,{A:()=>a});s(6540);var t=s(4164);const i="tabItem_Ymn6";var r=s(4848);function a(e){let{children:n,hidden:s,className:a}=e;return(0,r.jsx)("div",{role:"tabpanel",className:(0,t.A)(i,a),hidden:s,children:n})}},8453(e,n,s){s.d(n,{R:()=>a,x:()=>o});var t=s(6540);const i={},r=t.createContext(i);function a(e){const n=t.useContext(r);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:a(e.components),t.createElement(r.Provider,{value:n},e.children)}},9489(e,n,s){s.d(n,{A:()=>y});var t=s(6540),i=s(4164),r=s(8630),a=s(4245),o=s(2195),c=s(6494),l=s(2814),d=s(5167),u=s(9900);function h(e){var n,s;return null!=(n=null==(s=t.Children.toArray(e).filter((e=>"\n"!==e)).map((e=>{if(!e||(0,t.isValidElement)(e)&&function(e){const{props:n}=e;return!!n&&"object"==typeof n&&"value"in n}(e))return e;throw new Error("Docusaurus error: Bad <Tabs> child <"+("string"==typeof e.type?e.type:e.type.name)+'>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.')})))?void 0:s.filter(Boolean))?n:[]}function p(e){const{values:n,children:s}=e;return(0,t.useMemo)((()=>{const e=null!=n?n:function(e){return h(e).map((e=>{let{props:{value:n,label:s,attributes:t,default:i}}=e;return{value:n,label:s,attributes:t,default:i}}))}(s);return function(e){const n=(0,d.XI)(e,((e,n)=>e.value===n.value));if(n.length>0)throw new Error('Docusaurus error: Duplicate values "'+n.map((e=>e.value)).join(", ")+'" found in <Tabs>. Every value needs to be unique.')}(e),e}),[n,s])}function m(e){let{value:n,tabValues:s}=e;return s.some((e=>e.value===n))}function g(e){let{queryString:n=!1,groupId:s}=e;const i=(0,o.W6)(),r=function(e){let{queryString:n=!1,groupId:s}=e;if("string"==typeof n)return n;if(!1===n)return null;if(!0===n&&!s)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return null!=s?s:null}({queryString:n,groupId:s});return[(0,l.aZ)(r),(0,t.useCallback)((e=>{if(!r)return;const n=new URLSearchParams(i.location.search);n.set(r,e),i.replace(Object.assign({},i.location,{search:n.toString()}))}),[r,i])]}function b(e){const{defaultValue:n,queryString:s=!1,groupId:i}=e,r=p(e),[a,o]=(0,t.useState)((()=>function(e){var n;let{defaultValue:s,tabValues:t}=e;if(0===t.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(s){if(!m({value:s,tabValues:t}))throw new Error('Docusaurus error: The <Tabs> has a defaultValue "'+s+'" but none of its children has the corresponding value. Available values are: '+t.map((e=>e.value)).join(", ")+". If you intend to show no default tab, use defaultValue={null} instead.");return s}const i=null!=(n=t.find((e=>e.default)))?n:t[0];if(!i)throw new Error("Unexpected error: 0 tabValues");return i.value}({defaultValue:n,tabValues:r}))),[l,d]=g({queryString:s,groupId:i}),[h,b]=function(e){let{groupId:n}=e;const s=function(e){return e?"docusaurus.tab."+e:null}(n),[i,r]=(0,u.Dv)(s);return[i,(0,t.useCallback)((e=>{s&&r.set(e)}),[s,r])]}({groupId:i}),x=(()=>{const e=null!=l?l:h;return m({value:e,tabValues:r})?e:null})();(0,c.A)((()=>{x&&o(x)}),[x]);return{selectedValue:a,selectValue:(0,t.useCallback)((e=>{if(!m({value:e,tabValues:r}))throw new Error("Can't select invalid tab value="+e);o(e),d(e),b(e)}),[d,b,r]),tabValues:r}}var x=s(1062);const f="tabList__CuJ",j="tabItem_LNqP";var k=s(4848);function v(e){let{className:n,block:s,selectedValue:t,selectValue:r,tabValues:o}=e;const c=[],{blockElementScrollPositionUntilNextRender:l}=(0,a.a_)(),d=e=>{const n=e.currentTarget,s=c.indexOf(n),i=o[s].value;i!==t&&(l(n),r(i))},u=e=>{var n;let s=null;switch(e.key){case"Enter":d(e);break;case"ArrowRight":{var t;const n=c.indexOf(e.currentTarget)+1;s=null!=(t=c[n])?t:c[0];break}case"ArrowLeft":{var i;const n=c.indexOf(e.currentTarget)-1;s=null!=(i=c[n])?i:c[c.length-1];break}}null==(n=s)||n.focus()};return(0,k.jsx)("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,i.A)("tabs",{"tabs--block":s},n),children:o.map((e=>{let{value:n,label:s,attributes:r}=e;return(0,k.jsx)("li",Object.assign({role:"tab",tabIndex:t===n?0:-1,"aria-selected":t===n,ref:e=>{c.push(e)},onKeyDown:u,onClick:d},r,{className:(0,i.A)("tabs__item",j,null==r?void 0:r.className,{"tabs__item--active":t===n}),children:null!=s?s:n}),n)}))})}function w(e){let{lazy:n,children:s,selectedValue:r}=e;const a=(Array.isArray(s)?s:[s]).filter(Boolean);if(n){const e=a.find((e=>e.props.value===r));return e?(0,t.cloneElement)(e,{className:(0,i.A)("margin-top--md",e.props.className)}):null}return(0,k.jsx)("div",{className:"margin-top--md",children:a.map(((e,n)=>(0,t.cloneElement)(e,{key:n,hidden:e.props.value!==r})))})}function A(e){const n=b(e);return(0,k.jsxs)("div",{className:(0,i.A)(r.G.tabs.container,"tabs-container",f),children:[(0,k.jsx)(v,Object.assign({},n,e)),(0,k.jsx)(w,Object.assign({},n,e))]})}function y(e){const n=(0,x.A)();return(0,k.jsx)(A,Object.assign({},e,{children:h(e.children)}),String(n))}}}]);