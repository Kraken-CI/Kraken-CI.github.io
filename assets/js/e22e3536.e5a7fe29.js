"use strict";(self.webpackChunkkraken_ci_website=self.webpackChunkkraken_ci_website||[]).push([[3309],{8604:function(e,t,a){a.r(t),a.d(t,{assets:function(){return m},contentTitle:function(){return h},default:function(){return c},frontMatter:function(){return i},metadata:function(){return p},toc:function(){return u}});var n=a(3117),s=a(102),r=(a(7294),a(4137)),l=a(8742),o=(a(5944),["components"]),i={slug:"job-designer-and-more-0-962",title:"Job Designer and More - 0.962 Release",authors:"mike",tags:["kraken","release","theme","images"]},h=void 0,p={permalink:"/blog/job-designer-and-more-0-962",editUrl:"https://github.com/kraken-ci/website/edit/master/blog/blog/2022-05-09-job-designer-and-more-0-962.mdx",source:"@site/blog/2022-05-09-job-designer-and-more-0-962.mdx",title:"Job Designer and More - 0.962 Release",description:"The job designer",date:"2022-05-09T00:00:00.000Z",formattedDate:"May 9, 2022",tags:[{label:"kraken",permalink:"/blog/tags/kraken"},{label:"release",permalink:"/blog/tags/release"},{label:"theme",permalink:"/blog/tags/theme"},{label:"images",permalink:"/blog/tags/images"}],readingTime:2.21,truncated:!0,authors:[{name:"Michal Nowikowski",title:"Kraken Founder. I\u2019m software engineer focused on full-stack programming and improving software processes.",url:"https://www.linkedin.com/in/godfryd",imageURL:"https://avatars1.githubusercontent.com/u/176567?s=460&u=4ade22771af9569be24b20278d24ef60da6eb0bb&v=4",key:"mike"}],frontMatter:{slug:"job-designer-and-more-0-962",title:"Job Designer and More - 0.962 Release",authors:"mike",tags:["kraken","release","theme","images"]},nextItem:{title:"MLOps with MLflow on Kraken CI",permalink:"/blog/mlops-with-mlflow-on-kraken-ci"}},m={authorsImageUrls:[void 0]},u=[{value:"Job Designer",id:"job-designer",level:3},{value:"Shell Tool Improvements",id:"shell-tool-improvements",level:3},{value:"Flow Duration on Branch Chart",id:"flow-duration-on-branch-chart",level:3},{value:"New Base Docker Images",id:"new-base-docker-images",level:3},{value:"Split Results Chart",id:"split-results-chart",level:3}],d={toc:u};function c(e){var t=e.components,a=(0,s.Z)(e,o);return(0,r.kt)("wrapper",(0,n.Z)({},d,a,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("p",null,"The job designer\n(",(0,r.kt)("a",{parentName:"p",href:"https://github.com/Kraken-CI/kraken/issues/171"},"#171"),") is the main\nfeature in\n",(0,r.kt)("a",{parentName:"p",href:"https://github.com/Kraken-CI/kraken/releases/tag/v0.962"},"0.962"),"\nrelease."),(0,r.kt)("p",null,"Besides that, it contains:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"support for multiline shell scripts and selecting shell executable\n(",(0,r.kt)("a",{parentName:"li",href:"https://github.com/Kraken-CI/kraken/issues/183"},"#183")," and\n",(0,r.kt)("a",{parentName:"li",href:"https://github.com/Kraken-CI/kraken/issues/184"},"#184"),") charts"),(0,r.kt)("li",{parentName:"ul"},"new chart showing flows duration in a branch (",(0,r.kt)("a",{parentName:"li",href:"https://github.com/Kraken-CI/kraken/issues/173"},"#173"),")"),(0,r.kt)("li",{parentName:"ul"},"multiple new base docker images for various programming languages"),(0,r.kt)("li",{parentName:"ul"},"split results chart to pass ratio chart and passed/total chart (",(0,r.kt)("a",{parentName:"li",href:"https://github.com/Kraken-CI/kraken/issues/183"},"#187"),")")),(0,r.kt)("p",null,"More information about these changes is below."),(0,r.kt)("h3",{id:"job-designer"},"Job Designer"),(0,r.kt)("p",null,"Now it is possible to design job steps using a UI available on a\nbranch management page."),(0,r.kt)(l.Z,{img:"screen-branch-prepare-step-button.png",mdxType:"Screen"}),(0,r.kt)("p",null,"The ",(0,r.kt)("inlineCode",{parentName:"p"},"Prepare Step")," button shows the job designer dialog."),(0,r.kt)(l.Z,{img:"screen-branch-prepare-step-dialog.png",mdxType:"Screen"}),(0,r.kt)("p",null,"The dialog shows all available fields of a step with descriptions and\ninput boxes pre-filled with default values. These fields are available\nfor a tool selected in the dropdown at the top of the dialog. Below,\nthere is the step generated in JSON format."),(0,r.kt)("p",null,"In the case of the picture above, there is a shell tool\nselected. There are multiple fields available. A few are used:\n",(0,r.kt)("inlineCode",{parentName:"p"},"cmd"),", ",(0,r.kt)("inlineCode",{parentName:"p"},"cwd")," and ",(0,r.kt)("inlineCode",{parentName:"p"},"shell_exec"),". The generated step in JSON contains\nthese fields with user-provided values."),(0,r.kt)("p",null,"Now a user may copy the generated step and then paste it into the stage\nschema code."),(0,r.kt)("h3",{id:"shell-tool-improvements"},"Shell Tool Improvements"),(0,r.kt)("p",null,"The shell tool got two improvements. One allows for entering a multiline\nscript instead of just one command. The other one allows for indicating\nan alternative shell executable - the default one is ",(0,r.kt)("inlineCode",{parentName:"p"},"/bin/sh"),"."),(0,r.kt)("p",null,"A multiline script can be provided in the following way:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json"},'{\n   "steps": [{\n       "tool": "shell",\n       "script": """\n           echo \'multiline script\'\n           ls -al\n           echo \'completed\'\n       """\n   }]\n}\n')),(0,r.kt)("p",null,"Changing default shell executable to e.g. ",(0,r.kt)("inlineCode",{parentName:"p"},"zsh")," goes this way:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json"},'{\n   "steps": [{\n       "tool": "shell",\n       "cmd": "echo $ZSH_VERSION",\n       "shell_exec": "zsh"\n   }]\n}\n')),(0,r.kt)("p",null,"More in the ",(0,r.kt)("a",{parentName:"p",href:"/docs/schema#shell"},"docs"),"."),(0,r.kt)("h3",{id:"flow-duration-on-branch-chart"},"Flow Duration on Branch Chart"),(0,r.kt)("p",null,"On the branch management page, on ",(0,r.kt)("inlineCode",{parentName:"p"},"Stats and Charts")," tab, there are\nbasic stats about the branch, like the total number of flows or the\naverage flow duration in the last week. Below these stats, a chart\nshows the duration of flows over time."),(0,r.kt)(l.Z,{img:"screen-branch-stats.png",mdxType:"Screen"}),(0,r.kt)("p",null,"The whole stats and charts are presented in two instances: one for CI\nand the other one for DEV flows."),(0,r.kt)("h3",{id:"new-base-docker-images"},"New Base Docker Images"),(0,r.kt)("p",null,"There are multiple new Docker images prepared to be used in Kraken CI.\nThe full list is available in the ",(0,r.kt)("a",{parentName:"p",href:"/docs/docker-executor#language-images"},"docs page"),"."),(0,r.kt)("h3",{id:"split-results-chart"},"Split Results Chart"),(0,r.kt)("p",null,"Initially, the pass ratio was shown together with total and passed\ncounts on the same chart. Now that is split into two charts: 1) pass\nratio chart and 2) total and passed counts."))}c.isMDXComponent=!0},8742:function(e,t,a){var n=a(7294);t.Z=function(e){var t=e.img;return n.createElement("a",{href:"/img/"+t,target:"blank"},n.createElement("img",{src:"/img/"+t,style:{boxShadow:"0 10px 10px 5px #777",marginBottom:"30px"}}))}}}]);